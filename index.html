<!DOCTYPE html>
<html>
  <head>
    <title>Pomo</title>
    <script src="https://unpkg.com/vue"></script>
  </head>
  <body>
    <div id="app">
      <div class="container">
        <div id="timer">
          <span id="minutes">{{ minutes }}</span><span class="colon">:</span
          ><span class="seconds">{{ seconds }}</span>
        </div>
        <div id="actions">
          <button id="start" v-if="!timer" @click="startTimer">Start</button>
          <button id="stop" v-if="timer" @click="stopTimer">Stop</button>
          <button id="reset" v-if="resetButton" @click="resetTimer">
            Reset
          </button>
        </div>
      </div>
    </div>

    <script>
      var app = new Vue({
        el: '#app',
        data: {
          timer: null,
          totalTime: 25 * 60, //total time to run the timer in seconds
          resetButton: false,
        },
        methods: {
          startTimer: function () {
            this.timer = setInterval(() => this.countdown(), 1000); //calling countdown and decrements total time every 1sec
            this.resetButton = true;
          },
          stopTimer: function () {
            clearInterval(this.timer);
            this.timer = null;
            this.resetButton = true;
          },
          resetTimer: function () {
            this.totalTime = 25 * 60;
            clearInterval(this.timer);
            this.timer = null;
            this.resetButton = false; //remove reset button
          },
          padder: function (time) {
            return (time < 10 ? '0' : '') + time;
          },
          countdown: function () {
            if (this.totalTime >= 1) {
              this.totalTime--;
            } else {
              //no negatives thx
              this.totalTime = 0;
              this.resetTimer();
            }
          },
        },
        computed: {
          minutes: function () {
            const minutes = Math.floor(this.totalTime / 60);
            return this.padder(minutes);
          },
          seconds: function () {
            const seconds = this.totalTime - this.minutes * 60;
            return this.padder(seconds);
          },
        },
      });
    </script>
  </body>
</html>
